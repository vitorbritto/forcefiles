#!/bin/bash

# ------------------------------------------------------------------------------
# | NPM Settings                                                               |
# ------------------------------------------------------------------------------

run_npm() {

    # Check for npm
    if type_exists "npm"; then

        # Install Task Runer Packages
        e_header "Installing Task Runner Packages"
        local NPM_TEST='grunt-cli gulp bower'
        npm i -g "$NPM_TASK"
        e_success "Task Runner Packages successfully installed!"

        # Install Lint Packages
        e_header "Installing Test Packages"
        local NPM_LINT='jshint eslint jscs clean-css'
        npm i -g "$NPM_TEST"
        e_success "Test Packages successfully installed!"

        # Install Test Packages
        e_header "Installing Test Packages"
        local NPM_TEST='phantomjs casperjs slimerjs nightwatch dalek-cli cucumber pioneer mocha coveralls istanbul karma'
        npm i -g "$NPM_TEST"
        e_success "Test Packages successfully installed!"

        # Install Pre-processors Packages
        e_header "Installing Pre-processors Packages"
        local NPM_TEST='typescript coffee-script stylus jade node-sass'
        npm i -g "$NPM_TEST"
        e_success "Pre-processors Packages successfully installed!"

        # Install JavaScript Utils Packages
        e_header "Installing JavaScript Utils Packages"
        local NPM_UTILS='lodash uglifyjs babel react-tools obfuscator express strongloop shelljs less2stylus sass2stylus npm-check'
        npm i -g "$NPM_UTILS"
        e_success "JavaScript Utils Packages successfully installed!"

        # Install Performance Packages
        e_header "Installing Performance Packages"
        local NPM_PERF='phantomas psi webpagetest plato yslow'
        npm i -g "$NPM_PERF"
        e_success "Performance Packages successfully installed!"

        # Install Bundle and Live Reload Packages
        e_header "Installing Bundle and Live Reload Packages"
        local NPM_BUNDLE_RELOAD='browserify pm2 beefy webpack browser-sync'
        npm i -g "$NPM_BUNDLE_RELOAD"
        e_success "Bundle and Live Reload Packages successfully installed!"

        # Install Mobile Packages
        e_header "Installing Mobile Packages"
        local NPM_MOBILE='ionic cordova ios-sim ios-deploy'
        npm i -g "$NPM_MOBILE"
        e_success "Mobile Packages successfully installed!"

        # Install Generators
        e_header "Installing Generators Packages"
        local NPM_GENERATORS='harp yo'
        npm i -g "$NPM_GENERATORS"
        e_success "Generators Packages successfully installed!"

        # Install Native Apps Packages
        e_header "Installing Native Apps Packages"
        local NPM_NATIVE='electron-prebuilt'
        npm i -g "$NPM_NATIVE"
        e_success "Native Apps Packages successfully installed!"

        # Install General Packages
        e_header "Installing General Packages"
        local NPM_GENERAL='imageoptim-cli nave markdown tictac hoodie-cli add-cors-to-couchdb nodal'
        npm i -g "$NPM_GENERAL"
        e_success "General Packages successfully installed!"

    else

        printf "\n"
        e_error "Error: npm not found."
        printf "Aborting...\n"
        exit

    fi

}
