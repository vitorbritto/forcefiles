#!/bin/bash

# ------------------------------------------------------------------------------
# | Homebrew Settings                                                          |
# ------------------------------------------------------------------------------

run_brew() {

    # Check for Homebrew
    if type_exists "brew"; then

        sudo chown -R $(whoami) /usr/local/var/homebrew
        
        # Use the latest version of Homebrew
        e_header "Updating Homebrew"
        brew update
        e_success "Done!"

        # Upgrade any already-installed formulae
        e_header "Updating any existing Homebrew formulae"
        brew upgrade
        e_success "Done"

        # Install formulaes
        e_header "Installing Homebrew formulae"

        # NodeJS Dependencies
        brew install erlang nvm watchman
        brew install yarn --without-node

        # React Native - Detox E2E Tests
        brew tap wix/brew
        brew install --HEAD applesimutils
        
        e_success "Homebrew formulaes successfully installed!"

    else

        printf "\n"
        e_error "Error: Homebrew not found."
        printf "Aborting...\n"
        exit

    fi

}
